<!DOCTYPE html>
<html>
  <head>
    <link
      rel="shortcut icon"
      type="image/png"
      href="{{ url_for('static', filename='../images/favicon.png') }}"
    />

    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='../css/controller.css') }}"
    />

    <title>jlock control</title>
  </head>

  <body>
    <header>
      <h1>jlock</h1>
      <span class="identifier">on <em>{{host_name }}</em></span>
    </header>

    <main>
      <div id="styles">
        <h2>Styles</h2>

        <ul>
          {% for style in styles %} {% set name = style.split('.')[0] %}
          <li>
            <button id="style-{{name}}" onClick="styleSelect('{{name}}')">
              {{name | replace("-", " ")}}
            </button>
          </li>
          {% endfor %}
        </ul>
      </div>

      <div id="languages">
        <h2>Languages</h2>

        <ul>
          {% for id, name in languages.items() %}
          <li>
            <button id="language-{{id}}" onClick="languageSelect('{{id}}')">
              {{name}}
            </button>
          </li>
          {% endfor %}
        </ul>
      </div>
    </main>

    <script>
      let styleSelect = function (style) {
        sendData("/controller/style", { style: style });
      };

      let languageSelect = function (languageID) {
        sendData("/controller/language", { language: languageID });
      };

      let sendData = function (endPoint, data) {
        fetch(endPoint, {
          headers: { "Content-Type": "application/json" },
          method: "POST",
          body: JSON.stringify(data),
        });
      };
    </script>
  </body>
</html>
